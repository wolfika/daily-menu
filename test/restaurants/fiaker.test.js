import test from 'ava';
import restaurant from '../../restaurants/fiaker';

test('returns an object', (t) => {
  t.true(typeof restaurant === 'object');
});

test('has a name property', (t) => {
  t.truthy(restaurant.name);
});

test('has an url property', (t) => {
  t.truthy(restaurant.url);
});

test('has a getMenu method', (t) => {
  t.truthy(restaurant.getMenu);
  t.true(typeof restaurant.getMenu === 'function');
});

test('getMenu() given the http response body as argument, returns a non-empty array of the daily menu items', (t) => {
  const exampleBody = `<div class="blog-list-1"><div class="item"><div class="date"><p class="day"><cufon class="cufon cufon-canvas" alt="09" style="width: 42px; height: 37px;"><canvas width="64" height="41" style="width: 64px; height: 41px; top: -5px; left: -2px;"></canvas><cufontext>09</cufontext></cufon></p><p class="month"><cufon class="cufon cufon-canvas" alt="October" style="width: 46px; height: 11px;"><canvas width="55" height="13" style="width: 55px; height: 13px; top: -2px; left: -1px;"></canvas><cufontext>October</cufontext></cufon></p><p class="year"><cufon class="cufon cufon-canvas" alt="2017" style="width: 27px; height: 11px;"><canvas width="34" height="13" style="width: 34px; height: 13px; top: -2px; left: -1px;"></canvas><cufontext>2017</cufontext></cufon></p><p class="section"><a href="http://www.fiakeretterem.hu/category/heti-menu/" rel="category tag"><cufon class="cufon cufon-canvas" alt="Heti " style="width: 29px; height: 12px;"><canvas width="41" height="14" style="width: 41px; height: 14px; top: -2px; left: -1px;"></canvas><cufontext>Heti </cufontext></cufon><cufon class="cufon cufon-canvas" alt="Menü" style="width: 35px; height: 12px;"><canvas width="42" height="14" style="width: 42px; height: 14px; top: -2px; left: -1px;"></canvas><cufontext>Menü</cufontext></cufon></a></p><p class="author"><a href="http://www.fiakeretterem.hu/author/fiakeretterem/" title="Fiákerétterem bejegyzése" rel="author"><cufon class="cufon cufon-canvas" alt="Fiákerétterem" style="width: 84px; height: 12px;"><canvas width="87" height="14" style="width: 87px; height: 14px; top: -2px; left: -1px;"></canvas><cufontext>Fiákerétterem</cufontext></cufon></a></p></div><div class="image"><a href="http://www.fiakeretterem.hu/hetfo-780-huf/"><img src="http://www.fiakeretterem.hu/wp-content/themes/bordeaux/images/no-image-100x100.jpg" alt="Hétfő – 960 HUF" width="100" height="100"></a></div><div class="text"><h4><a href="http://www.fiakeretterem.hu/hetfo-780-huf/"><cufon class="cufon cufon-canvas" alt="Hétfő " style="width: 47px; height: 16px;"><canvas width="63" height="18" style="width: 63px; height: 18px; top: -2px; left: -1px;"></canvas><cufontext>Hétfő </cufontext></cufon><cufon class="cufon cufon-canvas" alt="– " style="width: 15px; height: 16px;"><canvas width="31" height="18" style="width: 31px; height: 18px; top: -2px; left: -1px;"></canvas><cufontext>– </cufontext></cufon><cufon class="cufon cufon-canvas" alt="960 " style="width: 33px; height: 16px;"><canvas width="49" height="18" style="width: 49px; height: 18px; top: -2px; left: -1px;"></canvas><cufontext>960 </cufontext></cufon><cufon class="cufon cufon-canvas" alt="HUF" style="width: 33px; height: 16px;"><canvas width="45" height="18" style="width: 45px; height: 18px; top: -2px; left: -1px;"></canvas><cufontext>HUF</cufontext></cufon></a></h4><p>Leves : Karfiol leves <br>&nbsp;<br>A menü : Mustáros tarja steak burgonya <br>&nbsp;<br>B menü : Fejtett babfőzelék sült debreceni </p></div></div><div class="item"><div class="date"><p class="day"><cufon class="cufon cufon-canvas" alt="10" style="width: 38px; height: 37px;"><canvas width="59" height="41" style="width: 59px; height: 41px; top: -5px; left: -2px;"></canvas><cufontext>10</cufontext></cufon></p><p class="month"><cufon class="cufon cufon-canvas" alt="October" style="width: 46px; height: 11px;"><canvas width="55" height="13" style="width: 55px; height: 13px; top: -2px; left: -1px;"></canvas><cufontext>October</cufontext></cufon></p><p class="year"><cufon class="cufon cufon-canvas" alt="2017" style="width: 27px; height: 11px;"><canvas width="34" height="13" style="width: 34px; height: 13px; top: -2px; left: -1px;"></canvas><cufontext>2017</cufontext></cufon></p><p class="section"><a href="http://www.fiakeretterem.hu/category/heti-menu/" rel="category tag"><cufon class="cufon cufon-canvas" alt="Heti " style="width: 29px; height: 12px;"><canvas width="41" height="14" style="width: 41px; height: 14px; top: -2px; left: -1px;"></canvas><cufontext>Heti </cufontext></cufon><cufon class="cufon cufon-canvas" alt="Menü" style="width: 35px; height: 12px;"><canvas width="42" height="14" style="width: 42px; height: 14px; top: -2px; left: -1px;"></canvas><cufontext>Menü</cufontext></cufon></a></p><p class="author"><a href="http://www.fiakeretterem.hu/author/fiakeretterem/" title="Fiákerétterem bejegyzése" rel="author"><cufon class="cufon cufon-canvas" alt="Fiákerétterem" style="width: 84px; height: 12px;"><canvas width="87" height="14" style="width: 87px; height: 14px; top: -2px; left: -1px;"></canvas><cufontext>Fiákerétterem</cufontext></cufon></a></p></div><div class="image"><a href="http://www.fiakeretterem.hu/kedd-780-huf/"><img src="http://www.fiakeretterem.hu/wp-content/themes/bordeaux/images/no-image-100x100.jpg" alt="Kedd – 960 HUF" width="100" height="100"></a></div><div class="text"><h4><a href="http://www.fiakeretterem.hu/kedd-780-huf/"><cufon class="cufon cufon-canvas" alt="Kedd " style="width: 44px; height: 16px;"><canvas width="60" height="18" style="width: 60px; height: 18px; top: -2px; left: -1px;"></canvas><cufontext>Kedd </cufontext></cufon><cufon class="cufon cufon-canvas" alt="– " style="width: 15px; height: 16px;"><canvas width="31" height="18" style="width: 31px; height: 18px; top: -2px; left: -1px;"></canvas><cufontext>– </cufontext></cufon><cufon class="cufon cufon-canvas" alt="960 " style="width: 33px; height: 16px;"><canvas width="49" height="18" style="width: 49px; height: 18px; top: -2px; left: -1px;"></canvas><cufontext>960 </cufontext></cufon><cufon class="cufon cufon-canvas" alt="HUF" style="width: 33px; height: 16px;"><canvas width="45" height="18" style="width: 45px; height: 18px; top: -2px; left: -1px;"></canvas><cufontext>HUF</cufontext></cufon></a></h4><p>Leves : Paradicsomleves<br>&nbsp;<br>A menü : Camemberttel töltött rántott karaj burgonyapüré <br>&nbsp;<br>B menü : Kolozsvári rakott káposzta </p></div></div></div>`;

  const dailyMenu = restaurant.getMenu(exampleBody, new Date('2017-10-10'));

  t.truthy(dailyMenu);
  t.true(Array.isArray(dailyMenu));
  t.truthy(dailyMenu.length);
});
