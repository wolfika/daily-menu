import test from 'ava';
import restaurant from '../../restaurants/istvanpince';

test('returns an object', (t) => {
  t.true(typeof restaurant === 'object');
});

test('has a name property', (t) => {
  t.truthy(restaurant.name);
});

test('has an url property', (t) => {
  t.truthy(restaurant.url);
});

test('has a getMenu method', (t) => {
  t.truthy(restaurant.getMenu);
  t.true(typeof restaurant.getMenu === 'function');
});

test('getMenu() given the http response body as argument, returns a non-empty array of the daily menu items', (t) => {
  const exampleBody = `<div><div class="_5x46 _1yz1 clearfix"><div class="clearfix _5va3"><a class="_5pb8 _1yz2 _8o _8s lfloat _ohe" href="https://www.facebook.com/istvanpince/?ref=nf&amp;hc_ref=ARSrMEDsCb30shftestba_N6tn_H-BTa3IhAFvw-6TFqaBU_MNwV7ngUZwfad4q0-Zn1g" aria-hidden="true" tabindex="-1" target="" data-ft="{&quot;tn&quot;:&quot;\u003C&quot;}" data-hovercard="/ajax/hovercard/page.php?id=334293719970466&amp;extragetparams=%7B%22hc_ref%22%3A%22ARSrMEDsCb30shftestba_N6tn_H-BTa3IhAFvw-6TFqaBU_MNwV7ngUZwfad4q0-Zn1g%22%7D" data-hovercard-prefer-more-content-show="1" data-hovercard-referer="ARSrMEDsCb30shftestba_N6tn_H-BTa3IhAFvw-6TFqaBU_MNwV7ngUZwfad4q0-Zn1g"><div class="_38vo"><img class="_s0 _4ooo _5xib _5sq7 _44ma _rw img" src="https://scontent-vie1-1.xx.fbcdn.net/v/t1.0-1/c74.14.172.172/s50x50/535332_334303593302812_397818775_n.jpg?oh=6eeecc3de285e7f2fda260151a4d4390&amp;oe=5A75191C" alt="" aria-label="István Pince Borozó &amp; Étterem - Pécs" role="img"></div></a><div class="clearfix _42ef"><div class="rfloat _ohf"></div><div class="_5va4"><div><div class="_6a _5u5j"><div class="_6a _6b" style="height:40px"></div><div class="_6a _5u5j _6b"><h6 class="_5pbw _5vra _11dd" data-ft="{&quot;tn&quot;:&quot;C&quot;}" id="js_3yi"><span class="fwn fcg"><span class="fcg"><span class="fwb"><a class="profileLink" href="https://www.facebook.com/istvanpince/?hc_ref=ARSCm2-ikwHKmBO5C_J7Xl5-U8k1DWjNrbIzBCwd29tygc64i2Nd3MtQdIrxX6XQE_Q" data-ft="{&quot;tn&quot;:&quot;k&quot;}" data-hovercard="/ajax/hovercard/page.php?id=334293719970466&amp;extragetparams=%7B%22hc_ref%22%3A%22ARSCm2-ikwHKmBO5C_J7Xl5-U8k1DWjNrbIzBCwd29tygc64i2Nd3MtQdIrxX6XQE_Q%22%7D" data-hovercard-prefer-more-content-show="1" data-hovercard-referer="ARSCm2-ikwHKmBO5C_J7Xl5-U8k1DWjNrbIzBCwd29tygc64i2Nd3MtQdIrxX6XQE_Q">István Pince Borozó &amp; Étterem - Pécs</a></span> added <a href="/istvanpince/posts/1534310113302148" data-ft="{&quot;tn&quot;:&quot;-U&quot;}">4 new photos</a>.</span></span></h6><div class="_5pcp _5lel _232_" id="feed_subttestle_334293719970466:-3129654609430215606"><span class="_5paw _14zs" data-ft="{&quot;tn&quot;:&quot;j&quot;}"><a class="_3e_2 _14zr" href="#"></a></span><span role="presentation" aria-hidden="true"> · </span><span><span class="fsm fwn fcg"><a class="_5pcq" href="/istvanpince/posts/1534310113302148" target=""><abbr ttestle="Wednesday, October 11, 2017 at 7:51am" data-utime="1507701113" data-shorten="1" class="_5ptz timestamp livetimestamp"><span class="timestampContent" id="js_3yj">13 hrs</span></abbr></a></span></span><span role="presentation" aria-hidden="true"> · </span><a data-hover="tooltip" data-tooltip-content="Public" class="uiStreamPrivacy inlineBlock fbStreamPrivacy fbPrivacyAudienceIndicator _5pcq" aria-label="Public" href="#" role="button" id="js_57q"><i class="lock img sp_jflGHtqyW0e sx_e02b9c"></i></a></div></div></div></div></div></div></div></div><div class="_5pbx userContent _3576" data-ft="{&quot;tn&quot;:&quot;K&quot;}" id="js_3yk"><div id="id_59de6e5ae5fde1720232026" class="text_exposed_root"><p>Mai menü :</p><p> Paradicsomleves<br> Burgonyafőzelék, feltét<br> Fűszeres csirkemell salátaágyon<span class="text_exposed_hide">...</span><span class="text_exposed_show"><br> Pirtestott sertésmáj, tört burgonya</span></p><span class="text_exposed_hide"> <span class="text_exposed_link"><a class="see_more_link" onclick="var func = function(e) { e.preventDefault(); }; var parent = Parent.byClass(this, &quot;text_exposed_root&quot;); if (parent &amp;&amp; parent.getAttribute(&quot;id&quot;) == &quot;id_59de6e5ae5fde1720232026&quot;) { CSS.addClass(parent, &quot;text_exposed&quot;); Arbtester.inform(&quot;reflow&quot;); }; func(event); " href="/istvanpince/posts/1534310113302148" data-ft="{&quot;tn&quot;:&quot;e&quot;}"><span class="see_more_link_inner">See More</span></a></span></span></div></div><div class="_3x-2"><div data-ft="{&quot;tn&quot;:&quot;H&quot;}"><div class="mtm"><div class="_2a2q" style="width:450px; height:450px;"><a class="_5dec _xcx" data-referrerid="334293719970466" href="/istvanpince/photos/pcb.1534310113302148/1534308899968936/?type=3" rel="theater" ajaxify="/istvanpince/photos/pcb.1534310113302148/1534308899968936/?type=3&amp;size=450%2C450&amp;fbid=1534308899968936&amp;source=13&amp;player_origin=unknown&amp;referrer_profile_id=334293719970466" data-ploi="https://scontent-vie1-1.xx.fbcdn.net/v/t1.0-9/22406214_1534308899968936_1732401475935964142_n.jpg?oh=2adea490b7ea036b00aeb47a89ae1fa4&amp;oe=5A42098F" data-render-location="homepage_stream" data-ft="{&quot;tn&quot;:&quot;E&quot;}" id="u_61_p" style="top:0px; left:0px; width: 224px; height: 224px;"><div class="uiScaledImageContainer" style="width:224px;height:224px;"><img class="scaledImageFtestWidth img" src="https://scontent-vie1-1.xx.fbcdn.net/v/t1.0-0/p75x225/22406214_1534308899968936_1732401475935964142_n.jpg?oh=b91f196450afe58a0f253028783d4bea&amp;oe=5A78AC83" alt="Image may contain: food" width="224" height="224"></div></a><a class="_5dec _xcx" data-referrerid="334293719970466" href="/istvanpince/photos/pcb.1534310113302148/1534309259968900/?type=3" rel="theater" ajaxify="/istvanpince/photos/pcb.1534310113302148/1534309259968900/?type=3&amp;size=1200%2C1600&amp;fbid=1534309259968900&amp;source=13&amp;player_origin=unknown&amp;referrer_profile_id=334293719970466" data-ploi="https://scontent-vie1-1.xx.fbcdn.net/v/t31.0-8/22339524_1534309259968900_4155124087603274655_o.jpg?oh=1ff2ba3056224241c68f2364f3e12e0f&amp;oe=5A70D090" data-render-location="homepage_stream" data-ft="{&quot;tn&quot;:&quot;E&quot;}" id="u_61_q" style="top:0px; left:226px; width: 224px; height: 224px;"><div class="uiScaledImageContainer" style="width:224px;height:224px;"><img class="scaledImageFtestWidth img" src="https://scontent-vie1-1.xx.fbcdn.net/v/t1.0-0/p228x119/22366752_1534309259968900_4155124087603274655_n.jpg?oh=3d43071af051549acf9e7a7f04cfc272&amp;oe=5A758E19" style="top:-37px;" alt="Image may contain: food" width="224" height="299"></div></a><a class="_5dec _xcx" data-referrerid="334293719970466" href="/istvanpince/photos/pcb.1534310113302148/1534309513302208/?type=3" rel="theater" ajaxify="/istvanpince/photos/pcb.1534310113302148/1534309513302208/?type=3&amp;size=1200%2C1600&amp;fbid=1534309513302208&amp;source=13&amp;player_origin=unknown&amp;referrer_profile_id=334293719970466" data-ploi="https://scontent-vie1-1.xx.fbcdn.net/v/t31.0-8/22339434_1534309513302208_7005793494899555865_o.jpg?oh=30429ca05d9e64ce93acd305a975cacf&amp;oe=5A78E582" data-render-location="homepage_stream" data-ft="{&quot;tn&quot;:&quot;E&quot;}" id="u_61_r" style="top:226px; left:0px; width: 224px; height: 224px;"><div class="uiScaledImageContainer" style="width:224px;height:224px;"><img class="scaledImageFtestWidth img" src="https://scontent-vie1-1.xx.fbcdn.net/v/t1.0-0/p228x119/22365232_1534309513302208_7005793494899555865_n.jpg?oh=0b473f76a85ba830282a51eef400300c&amp;oe=5A6D8ACF" style="top:-37px;" alt="Image may contain: food" width="224" height="299"></div></a><a class="_5dec _xcx" data-referrerid="334293719970466" href="/istvanpince/photos/pcb.1534310113302148/1534311323302027/?type=3" rel="theater" ajaxify="/istvanpince/photos/pcb.1534310113302148/1534311323302027/?type=3&amp;size=594%2C395&amp;fbid=1534311323302027&amp;source=13&amp;player_origin=unknown&amp;referrer_profile_id=334293719970466" data-ploi="https://scontent-vie1-1.xx.fbcdn.net/v/t1.0-9/22405818_1534311323302027_1665966310206639677_n.jpg?oh=f0cf6a344e73f55ab407d8296a0f8606&amp;oe=5A3DACF7" data-render-location="homepage_stream" data-ft="{&quot;tn&quot;:&quot;E&quot;}" id="u_61_o" style="top:226px; left:226px; width: 224px; height: 224px;"><div class="uiScaledImageContainer" style="width:224px;height:224px;"><img class="scaledImageFtestHeight img" src="https://scontent-vie1-1.xx.fbcdn.net/v/t1.0-0/p75x225/22405818_1534311323302027_1665966310206639677_n.jpg?oh=4bcfa5a29a5f2a1530c703a9c62f6615&amp;oe=5A6DEAFB" style="left:-56px;" alt="Image may contain: food" width="337" height="224"></div></a></div></div></div></div><div></div></div>`;

  const dailyMenu = restaurant.getMenu(exampleBody);

  t.truthy(dailyMenu);
  t.true(Array.isArray(dailyMenu));
  t.truthy(dailyMenu.length);
});
